{"version":3,"sources":["pages/game/GameRunner.tsx","controller/adapters/rest.tsx","pages/game/ControllerCreator.tsx","pages/game/Run.tsx","pages/game/Setup.tsx","engine/types.ts","pages/Home.tsx","pages/parts/Content.tsx","pages/parts/Footer.tsx","pages/parts/Header.tsx","pages/Tester.tsx","pages/Viewer.tsx","App.tsx","index.tsx"],"names":["SetupStage","headers","RestController","url","init","payload","a","axios","post","response","data","update","state","this","RestControllerSelector","setController","position","inputCallback","useCallback","event","controller","target","value","Item","label","name","prefix","GlobalOutlined","onChange","isController","ControllerCreator","onControllerChange","onNext","controllers","useMemo","selectCallback","pos","filter","type","onClick","Paragraph","Typography","Run","props","onCancel","onPrev","options","length","danger","message","showIcon","JSON","stringify","React","Component","GameSetup","onConfigChange","useState","gridSize","setGridSize","maxTicks","setMaxTicks","changeCallback","onMaxTicksChange","onGridSizeChange","useEffect","min","max","defaultValue","Step","Steps","Title","Move","GameRunner","CONTROLLER_CREATOR","currentStage","setCurrentStage","setControllers","setOptions","creatorCallback","nextCallback","Math","SUMMARY","prevCallback","current","title","GAME_SETUP","PLAYING","HomePage","Content","Layout","ContentPart","className","children","Footer","FooterPart","href","Header","HeaderPart","theme","mode","to","TabPane","Tabs","sampleIniData","playerNumber","playerCount","gameId","sampleStateData","tick","positions","lastMoves","NORTH","SOUTH","food","playerAlive","meta","ControllerTesterPage","setResponse","sendData","setSendData","loaderCallback","newController","gameIniButton","then","r","catch","e","stateSendButton","defaultActiveKey","tab","gutter","span","ViewerPage","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0775f16b.chunk.js","sourcesContent":["import { Steps, Typography } from \"antd\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport { Controller } from \"../../controller/types\";\r\nimport { GameOptions } from \"../../engine/types\";\r\nimport { ControllerCreator } from \"./ControllerCreator\";\r\nimport { Run } from \"./Run\";\r\nimport { GameSetup } from \"./Setup\";\r\n\r\nconst { Step } = Steps;\r\nconst { Title } = Typography;\r\n\r\nexport type GamePageProps = {};\r\n\r\nenum SetupStage {\r\n  CONTROLLER_CREATOR,\r\n  GAME_SETUP,\r\n  PLAYING,\r\n  SUMMARY,\r\n}\r\n\r\nexport const GameRunner: React.FunctionComponent<GamePageProps> = () => {\r\n  const [currentStage, setCurrentStage] = useState(\r\n    SetupStage.CONTROLLER_CREATOR\r\n  );\r\n\r\n  const [controllers, setControllers] = useState<Controller[]>([]);\r\n  const [options, setOptions] = useState<GameOptions | undefined>();\r\n\r\n  const creatorCallback = useCallback(\r\n    (controllers) => {\r\n      setControllers(controllers);\r\n    },\r\n    [setControllers]\r\n  );\r\n\r\n  const onConfigChange = useCallback(\r\n    (options) => {\r\n      setOptions(options);\r\n    },\r\n    [setOptions]\r\n  );\r\n\r\n  const nextCallback = useCallback(() => {\r\n    setCurrentStage(Math.min(currentStage + 1, SetupStage.SUMMARY));\r\n  }, [currentStage, setCurrentStage]);\r\n  const prevCallback = useCallback(() => {\r\n    setCurrentStage(Math.max(currentStage - 1, SetupStage.CONTROLLER_CREATOR));\r\n  }, [currentStage, setCurrentStage]);\r\n\r\n  return (\r\n    <>\r\n      <Title>Play a Game</Title>\r\n      <Steps current={currentStage}>\r\n        <Step title=\"Controller Creator\" />\r\n        <Step title=\"Game Setup\" />\r\n        <Step title=\"Running\" />\r\n        <Step title=\"Summary\" />\r\n      </Steps>\r\n\r\n      <br />\r\n      {currentStage === SetupStage.CONTROLLER_CREATOR && (\r\n        <ControllerCreator\r\n          onControllerChange={creatorCallback}\r\n          onNext={nextCallback}\r\n        />\r\n      )}\r\n      {currentStage === SetupStage.GAME_SETUP && (\r\n        <GameSetup\r\n          onConfigChange={onConfigChange}\r\n          onNext={nextCallback}\r\n          onPrev={prevCallback}\r\n        />\r\n      )}\r\n      {currentStage === SetupStage.PLAYING && (\r\n        <Run\r\n          controllers={controllers}\r\n          options={options}\r\n          onPrev={prevCallback}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { Form, Input } from \"antd\";\r\nimport axios from \"axios\";\r\nimport React, { useCallback } from \"react\";\r\nimport { GlobalOutlined } from \"@ant-design/icons\";\r\nimport { GameState } from \"../../engine/types\";\r\nimport { Controller, ControllerSelectorProps, InitPayload } from \"../types\";\r\n\r\nconst headers = { \"Access-Control-Allow-Origin\": \"*\" };\r\n\r\nexport class RestController implements Controller {\r\n  private url: string;\r\n\r\n  constructor(url: string) {\r\n    this.url = url;\r\n  }\r\n\r\n  init = async (payload: InitPayload) => {\r\n    const response = await (\r\n      await axios.post(this.url, payload, { headers })\r\n    ).headers({ \"Access-Control-Allow-Origin\": \"*\" });\r\n    return response.data;\r\n  };\r\n\r\n  update = async (state: GameState) => {\r\n    const response = await axios.post(this.url, state, { headers });\r\n    return response.data;\r\n  };\r\n}\r\n\r\nexport const RestControllerSelector: React.FunctionComponent<ControllerSelectorProps> =\r\n  ({ setController, position }) => {\r\n    const inputCallback = useCallback(\r\n      (event) => {\r\n        const controller = new RestController(event.target.value);\r\n        setController(controller);\r\n      },\r\n      [setController]\r\n    );\r\n\r\n    return (\r\n      <Form.Item label=\"Address\" name={position}>\r\n        <Input prefix={<GlobalOutlined />} onChange={inputCallback} />\r\n      </Form.Item>\r\n    );\r\n  };\r\n","import { Button, Form } from \"antd\";\r\nimport React, { useCallback, useMemo } from \"react\";\r\nimport { RestControllerSelector } from \"../../controller/adapters/rest\";\r\nimport { Controller } from \"../../controller/types\";\r\n\r\nexport type ControllerCreatorProps = {\r\n  onControllerChange: (controllers: Controller[]) => void;\r\n  onNext: () => void;\r\n};\r\n\r\nconst isController = (\r\n  controller: Controller | undefined\r\n): controller is Controller => {\r\n  return !!controller;\r\n};\r\n\r\nexport const ControllerCreator: React.FunctionComponent<ControllerCreatorProps> =\r\n  ({ onControllerChange, onNext }) => {\r\n    const controllers: Array<Controller | undefined> = useMemo(() => [], []);\r\n\r\n    const selectCallback = useCallback(\r\n      (pos) => (controller: Controller) => {\r\n        controllers[pos] = controller;\r\n        onControllerChange(controllers.filter(isController));\r\n      },\r\n      [onControllerChange, controllers]\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <Form>\r\n          <RestControllerSelector setController={selectCallback(0)} />\r\n          <RestControllerSelector setController={selectCallback(1)} />\r\n        </Form>\r\n\r\n        <Button type=\"primary\" onClick={onNext}>\r\n          Next\r\n        </Button>\r\n      </>\r\n    );\r\n  };\r\n","import { Alert, Button, Typography } from \"antd\";\r\nimport React from \"react\";\r\nimport { Controller } from \"../../controller/types\";\r\nimport { Game } from \"../../engine/game\";\r\nimport { GameOptions } from \"../../engine/types\";\r\n\r\nconst { Paragraph } = Typography;\r\n\r\nexport type RunProps = {\r\n  controllers?: Controller[];\r\n  options?: GameOptions;\r\n  onPrev: () => void;\r\n};\r\n\r\nexport type RunState = {\r\n  game?: Game;\r\n};\r\n\r\nexport class Run extends React.Component<RunProps, RunState> {\r\n  constructor(props: RunProps) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  onCancel = () => {\r\n    this.props.onPrev();\r\n  };\r\n\r\n  render() {\r\n    const { controllers, options } = this.props;\r\n    if (!controllers || !controllers.length || !options) {\r\n      return (\r\n        <>\r\n          <Alert\r\n            message=\"Something went wrong... There were either no controllers or options specified\"\r\n            type=\"error\"\r\n            showIcon\r\n          />\r\n          <Paragraph>\r\n            Controllers:\r\n            <pre>{JSON.stringify(controllers, null, 2)}</pre>\r\n          </Paragraph>\r\n          <Paragraph>\r\n            Options:\r\n            <pre>{JSON.stringify(options, null, 2)}</pre>\r\n          </Paragraph>\r\n          <Button onClick={this.onCancel}>Previous</Button>\r\n        </>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Button onClick={this.onCancel} danger>\r\n          Cancel\r\n        </Button>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import { Button, Form, InputNumber, Space } from \"antd\";\r\nimport React, { useCallback, useEffect } from \"react\";\r\nimport { GameOptions } from \"../../engine/types\";\r\n\r\nexport type GameSetupProps = {\r\n  onConfigChange: (options: GameOptions) => void;\r\n  onNext: () => void;\r\n  onPrev: () => void;\r\n};\r\n\r\nexport const GameSetup: React.FunctionComponent<GameSetupProps> = ({\r\n  onConfigChange,\r\n  onNext,\r\n  onPrev,\r\n}) => {\r\n  const [gridSize, setGridSize] = React.useState(50);\r\n  const [maxTicks, setMaxTicks] = React.useState(1000);\r\n\r\n  const changeCallback = useCallback(() => {\r\n    onConfigChange({\r\n      gridSize,\r\n      maxTicks,\r\n    });\r\n  }, [onConfigChange, gridSize, maxTicks]);\r\n\r\n  const onMaxTicksChange = useCallback(\r\n    (value: number) => {\r\n      setMaxTicks(value);\r\n      changeCallback();\r\n    },\r\n    [changeCallback, setMaxTicks]\r\n  );\r\n\r\n  const onGridSizeChange = useCallback(\r\n    (value: number) => {\r\n      setGridSize(value);\r\n      changeCallback();\r\n    },\r\n    [changeCallback, setGridSize]\r\n  );\r\n\r\n  useEffect(() => {\r\n    onConfigChange({\r\n      gridSize,\r\n      maxTicks,\r\n    });\r\n  }, [onConfigChange, gridSize, maxTicks]);\r\n\r\n  return (\r\n    <>\r\n      <Form>\r\n        <Form.Item label=\"Max ticks\">\r\n          <InputNumber\r\n            min={100}\r\n            max={10000}\r\n            defaultValue={1000}\r\n            value={maxTicks}\r\n            onChange={onMaxTicksChange}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Grid size\">\r\n          <InputNumber\r\n            min={10}\r\n            max={1000}\r\n            defaultValue={50}\r\n            value={gridSize}\r\n            onChange={onGridSizeChange}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n\r\n      <Space>\r\n        <Button onClick={onPrev}>Previous</Button>\r\n        <Button type=\"primary\" onClick={onNext}>\r\n          Start\r\n        </Button>\r\n      </Space>\r\n    </>\r\n  );\r\n};\r\n","export type GameOptions = {\r\n  gridSize: number;\r\n  maxTicks: number;\r\n};\r\n\r\nexport type GameHistory =\r\n  | {\r\n      error: false;\r\n      tickCount: number;\r\n      ticks: Omit<GameState, \"meta\">[];\r\n      winner: number;\r\n      gridSize: number;\r\n      playerCount: number;\r\n      gameId: string;\r\n    }\r\n  | { error: true; errorMessage: string };\r\n\r\nexport type GameOptionsOptionals = {};\r\n\r\nexport enum Move {\r\n  NORTH = \"N\",\r\n  SOUTH = \"S\",\r\n  EAST = \"E\",\r\n  WEST = \"W\",\r\n}\r\n\r\nexport type Pos = [number, number];\r\n\r\nexport type GameState = {\r\n  tick: number;\r\n  positions: Array<Pos[]>;\r\n  food: Pos[];\r\n  playerAlive: boolean[];\r\n  lastMoves: Move[];\r\n  meta: {\r\n    gridSize: number;\r\n    playerCount: number;\r\n    gameId: string;\r\n  };\r\n};\r\n","import { Typography } from \"antd\";\r\nimport React from \"react\";\r\n\r\nconst { Title, Paragraph } = Typography;\r\n\r\nexport type HomePageProps = {};\r\n\r\nexport const HomePage: React.FunctionComponent<HomePageProps> = (props) => {\r\n  return (\r\n    <>\r\n      <Title>Snake Tron - Code Fights!</Title>\r\n\r\n      <Paragraph>What, you thought there would be content?</Paragraph>\r\n    </>\r\n  );\r\n};\r\n","import { Layout } from \"antd\";\r\nimport React from \"react\";\r\n\r\nconst { Content } = Layout;\r\n\r\nexport type ContentPartProps = {};\r\n\r\nexport const ContentPart: React.FunctionComponent<ContentPartProps> = (\r\n  props\r\n) => {\r\n  return <Content className=\"content\">{props.children}</Content>;\r\n};\r\n","import React from \"react\";\r\nimport { Layout } from \"antd\";\r\n\r\nconst { Footer } = Layout;\r\n\r\nexport const FooterPart: React.FunctionComponent = () => {\r\n  return (\r\n    <Footer className=\"footer\">\r\n      Created by <a href=\"http://samuel-lewis.com/\">Samuel Lewis</a>\r\n    </Footer>\r\n  );\r\n};\r\n","import { Layout, Menu } from \"antd\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst { Header } = Layout;\r\n\r\nexport const HeaderPart: React.FunctionComponent = () => {\r\n  return (\r\n    <Header className=\"header\">\r\n      <div className=\"logo\">🐍🏍️</div>\r\n      <Menu theme=\"dark\" mode=\"horizontal\">\r\n        <Menu.Item key=\"home\">\r\n          <Link to=\"/\">Home</Link>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"game\">\r\n          <Link to=\"/game\">Game</Link>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"viewer\">\r\n          <Link to=\"/viewer\">Viewer</Link>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"tester\">\r\n          <Link to=\"/tester\">Controller Tester</Link>\r\n        </Menu.Item>\r\n      </Menu>\r\n    </Header>\r\n  );\r\n};\r\n","import { Button, Col, Divider, Row, Tabs, Typography } from \"antd\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport { RestControllerSelector } from \"../controller/adapters/rest\";\r\nimport { Controller, InitPayload } from \"../controller/types\";\r\nimport { GameState, Move } from \"../engine/types\";\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Title, Paragraph } = Typography;\r\n\r\nconst sampleIniData: InitPayload = {\r\n  playerNumber: 2,\r\n  playerCount: 4,\r\n  gameId: \"sample-test\",\r\n  gridSize: 50,\r\n};\r\n\r\nconst sampleStateData: GameState = {\r\n  tick: 2,\r\n  positions: [\r\n    [\r\n      [42, 31],\r\n      [41, 31],\r\n      [40, 31],\r\n    ],\r\n    [\r\n      [47, 27],\r\n      [47, 28],\r\n    ],\r\n  ],\r\n  lastMoves: [Move.NORTH, Move.SOUTH],\r\n  food: [\r\n    [35, 16],\r\n    [17, 6],\r\n  ],\r\n  playerAlive: [true, true],\r\n  meta: {\r\n    playerCount: 2,\r\n    gameId: \"48e2ee9e-171e-45bd-8904-a762d8e2b782\",\r\n    gridSize: 50,\r\n  },\r\n};\r\n\r\nexport type ControllerTesterPageProps = {};\r\n\r\nexport const ControllerTesterPage: React.FunctionComponent<ControllerTesterPageProps> =\r\n  () => {\r\n    const [controller, setController] = useState<Controller | null>(null);\r\n    const [response, setResponse] = useState<string>(\"\");\r\n    const [sendData, setSendData] = useState<string>(\"\");\r\n\r\n    const loaderCallback = useCallback(\r\n      (newController) => {\r\n        setController(newController);\r\n      },\r\n      [setController]\r\n    );\r\n\r\n    const gameIniButton = useCallback(() => {\r\n      setSendData(JSON.stringify(sampleIniData, null, 2));\r\n      controller\r\n        ?.init(sampleIniData)\r\n        .then((r) => setResponse(JSON.stringify(r, null, 2)))\r\n        .catch((e) => setResponse(e.message));\r\n    }, [controller, setResponse]);\r\n\r\n    const stateSendButton = useCallback(() => {\r\n      setSendData(JSON.stringify(sampleStateData, null, 2));\r\n      controller\r\n        ?.update(sampleStateData)\r\n        .then((r) => setResponse(JSON.stringify(r, null, 2)))\r\n        .catch((e) => setResponse(e.message));\r\n    }, [controller, setResponse]);\r\n\r\n    return (\r\n      <>\r\n        <Title>Controller Tester</Title>\r\n\r\n        <Tabs defaultActiveKey=\"1\">\r\n          <TabPane tab=\"Rest\" key=\"1\">\r\n            <RestControllerSelector setController={loaderCallback} />\r\n          </TabPane>\r\n        </Tabs>\r\n\r\n        <Button onClick={gameIniButton}>Test game initialise</Button>\r\n        <Button onClick={stateSendButton}>Test game update</Button>\r\n\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Divider>Sent</Divider>\r\n            <Paragraph>{sendData && <pre>{sendData}</pre>}</Paragraph>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Divider>Response</Divider>\r\n            <Paragraph>{response && <pre>{response}</pre>}</Paragraph>\r\n          </Col>\r\n        </Row>\r\n      </>\r\n    );\r\n  };\r\n","import { Typography } from \"antd\";\r\nimport React from \"react\";\r\n\r\nconst { Title, Paragraph } = Typography;\r\n\r\nexport type ViewerPageProps = {};\r\n\r\nexport const ViewerPage: React.FunctionComponent<ViewerPageProps> = () => {\r\n  return (\r\n    <>\r\n      <Title>Game Viewer</Title>\r\n      <Paragraph>What, you thought there would be content?</Paragraph>\r\n    </>\r\n  );\r\n};\r\n","import \"antd/dist/antd.css\";\nimport \"./App.less\";\nimport { Layout } from \"antd\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { GameRunner } from \"./pages/game/GameRunner\";\nimport { HomePage } from \"./pages/Home\";\nimport { ContentPart } from \"./pages/parts/Content\";\nimport { FooterPart } from \"./pages/parts/Footer\";\nimport { HeaderPart } from \"./pages/parts/Header\";\nimport { ControllerTesterPage } from \"./pages/Tester\";\nimport { ViewerPage } from \"./pages/Viewer\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Layout className=\"layout\">\n        <HeaderPart />\n        <ContentPart>\n          <Switch>\n            <Route exact path=\"/\">\n              <HomePage />\n            </Route>\n            <Route path=\"/game\">\n              <GameRunner />\n            </Route>\n            <Route path=\"/viewer\">\n              <ViewerPage />\n            </Route>\n            <Route path=\"/tester\">\n              <ControllerTesterPage />\n            </Route>\n          </Switch>\n        </ContentPart>\n        <FooterPart />\n      </Layout>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}