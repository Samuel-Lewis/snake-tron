(this["webpackJsonpsnake-tron"]=this["webpackJsonpsnake-tron"]||[]).push([[0],{205:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),i=n.n(c),s=n(27),o=n.n(s),l=n(49),u=(n(204),n(205),n(315)),j=n(28),O=n(26),b=n(328),d=n(320),h=n(139),f=n(329),p=n(67),m=n(319),x=n(314),g=n(50),v=n(78),S=n(333),y=n(196),R=n(33),k=n.n(R),T=n(60),C=n(89),E=n(325),I=n(149),N=n.n(I),w=n(332),A=n(6),M={"Access-Control-Allow-Origin":"*"},P=function e(t){var n=this;Object(C.a)(this,e),this.url=void 0,this.init=function(){var e=Object(T.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post(n.url,t,{headers:M});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=function(){var e=Object(T.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post(n.url,t,{headers:M});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.end=function(){var e=Object(T.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post(n.url,t,{headers:M});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.url=t},U={Selector:function(e){var t=e.onChange,n=Object(c.useCallback)((function(e){t&&t(e.target.value)}),[t]);return Object(A.jsx)(m.a.Item,{label:"Address",children:Object(A.jsx)(E.a,{prefix:Object(A.jsx)(w.a,{}),onChange:n})})},create:function(e){return new P(e)},label:"REST"},G=function(e){return!!e},_=[U],L=function(e){var t=e.onControllerChange,n=e.onNext,r=Object(c.useState)([]),a=Object(O.a)(r,2),i=a[0],s=a[1],o=Object(c.useMemo)((function(){return[]}),[]),l=Object(c.useCallback)((function(e){return function(n){o[e]=i[e].factory.create(n),t(o.filter(G))}}),[t,o,i]),u=Object(c.useMemo)((function(){return i.map((function(e,n){var r=e.key,a=e.factory;return Object(A.jsxs)(f.b,{style:{display:"flex"},align:"baseline",children:[Object(A.jsx)(a.Selector,{onChange:l(n)}),Object(A.jsx)(p.a,{type:"text",icon:Object(A.jsx)(S.a,{}),onClick:function(){s(i.filter((function(e){return e.key!==r}))),o[n]=void 0,t(o.filter(G))}})]},r)}))}),[i,s,o,l,t]),j=Object(c.useMemo)((function(){return _.map((function(e,t){return Object(A.jsxs)(p.a,{type:"dashed",icon:Object(A.jsx)(y.a,{}),onClick:function(){s([].concat(Object(h.a)(i),[{key:Object(v.uniqueId)(e.label),factory:e}]))},children:["Add ",e.label," controller"]},t)}))}),[i,s]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{children:u}),Object(A.jsx)(f.b,{children:j}),Object(A.jsx)(x.a,{}),Object(A.jsx)(g.a,{title:"You must specifiy at least 2 controllers",placement:"right",children:Object(A.jsx)(p.a,{type:"primary",onClick:n,disabled:o.length<2,children:"Next"})})]})},D=n(136),z=n(197),H=n(191),F=n(330),J=n(190),W=n(36),V=n(327),Y=n(65);!function(e){e.DRAW="DRAW",e.WINNER="WINNER",e.TIMEOUT="TIMEOUT"}(r||(r={})),function(e){e.NORTH="N",e.SOUTH="S",e.EAST="E",e.WEST="W"}(a||(a={}));var q,B=function(e){return[Math.floor(Math.random()*e),Math.floor(Math.random()*e)]},K=function(e){var t=e[e.length-1],n=t.meta,a=t.playerAlive.filter((function(e){return e})).length,c=a>1?r.TIMEOUT:1===a?r.WINNER:r.DRAW,i=t.playerAlive.findIndex((function(e){return e})),s=e.map((function(e){return Object(v.omit)(e,["meta"])})),o=(new Date).toISOString();return Object(W.a)(Object(W.a)({},n),{},{tickCount:s.length,ticks:s,winner:i,timeStamp:o,result:c})},Q={gridSize:50,maxTicks:1e3},X=function(){function e(t,n,r){Object(C.a)(this,e),this.controllers=void 0,this.options=void 0,this.gameState=void 0,this.controllersReady=void 0,this.onGameTick=void 0,this.controllers=t,this.options=Object(W.a)(Object(W.a)({},Q),n),console.log(n),this.gameState=this.initState(t,this.options),this.controllersReady=new Array(t.length).fill(!1),this.onGameTick=null!==r&&void 0!==r?r:function(){}}return Object(D.a)(e,[{key:"initControllers",value:function(){var e=Object(T.a)(k.a.mark((function e(){var t=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.controllers.map(function(){var e=Object(T.a)(k.a.mark((function e(n,r){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init({playerNumber:r,gameId:t.gameState.meta.gameId,gridSize:t.gameState.meta.gridSize,playerCount:t.gameState.meta.playerCount});case 2:t.controllersReady[r]=!0;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(T.a)(k.a.mark((function e(){var t,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.controllersReady.every((function(e){return e}))){e.next=2;break}throw new Error("Controllers are not ready. "+JSON.stringify(this.controllersReady));case 2:t=[];case 3:if(!(this.gameState.playerAlive.filter((function(e){return e})).length>1&&this.gameState.tick<this.options.maxTicks)){e.next=11;break}return n=Object(v.cloneDeep)(this.gameState),t.push(n),e.next=8,this.update();case 8:this.onGameTick(this.gameState.tick),e.next=3;break;case 11:return r=Object(v.cloneDeep)(this.gameState),t.push(r),this.onGameTick(this.gameState.tick),e.abrupt("return",K(t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initState",value:function(e,t){var n=e.length,r={tick:0,positions:[],lastMoves:[],food:[],playerAlive:new Array(n).fill(!0),meta:{playerCount:n,gameId:Object(V.a)(),gridSize:t.gridSize}};return r.positions=this.uniquePos(r,n).map((function(e){return[e]})),r.food=this.uniquePos(r,n),r}},{key:"uniquePos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=0;r<t;r++){var a=B(e.meta.gridSize);n.push(a)}return n}},{key:"update",value:function(){var e=Object(T.a)(k.a.mark((function e(){var t,n,r=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.controllers.map(function(){var e=Object(T.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.update(r.gameState);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return t=e.sent,n=this.apply(this.gameState,t),this.gameState=n,e.abrupt("return",this.gameState);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"apply",value:function(e,t){var n,r=Object(W.a)({},e);return r.tick=e.tick+1,t.forEach((function(t,n){if(e.playerAlive[n]){var c,i,s=e.positions[n][0],o=function(e){var t;return(t={},Object(Y.a)(t,a.NORTH,[0,-1]),Object(Y.a)(t,a.SOUTH,[0,1]),Object(Y.a)(t,a.EAST,[1,0]),Object(Y.a)(t,a.WEST,[-1,0]),t)[e]}(t),l=[s[0]+o[0],s[1]+o[1]];if(r.lastMoves[n]=t,c=l,i=r.meta.gridSize,c.every((function(e){return e>=0&&e<i})))if(e.positions.some((function(e){return e.some((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return n===l[0]&&r===l[1]}))})))r.playerAlive[n]=!1;else e.food.some((function(e){return e[0]===l[0]&&e[1]===l[1]&&(r.food=r.food.filter((function(t){return t!==e})),!0)}))||r.positions[n].pop(),r.positions[n].unshift(l);else r.playerAlive[n]=!1}})),(n=r.food).push.apply(n,Object(h.a)(this.uniquePos(r,r.meta.playerCount-r.food.length))),r}}]),e}(),Z=d.a.Title;!function(e){e[e.UNSET=0]="UNSET",e[e.CONTROLLER_INIT=1]="CONTROLLER_INIT",e[e.ERROR_STATE=2]="ERROR_STATE",e[e.GAME_RUN=3]="GAME_RUN",e[e.GAME_OVER=4]="GAME_OVER"}(q||(q={}));var $,ee=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var r;return Object(C.a)(this,n),(r=t.call(this,e)).onTickUpdate=function(e){var t=r.props.options;if(t){var n=Math.round(e/t.maxTicks*100);r.setState({tickProgress:n})}},r.onCancel=function(){r.props.onPrev()},r.stateUpdate=function(e){var t=r.state,n=t.runStage,a=t.game;if(a)switch(n){case q.CONTROLLER_INIT:a.initControllers().then((function(){r.setState({runStage:q.GAME_RUN})})).catch((function(e){r.setState({runStage:q.ERROR_STATE,errorTitle:"Error initialising controllers",errorDesc:e.message})}));break;case q.GAME_RUN:a.run().then((function(e){r.props.gameComplete(e),r.setState({runStage:q.GAME_OVER,history:e}),r.props.onNext()})).catch((function(e){r.setState({runStage:q.ERROR_STATE,errorTitle:"Error running game",errorDesc:e.message})}))}else r.setState({runStage:q.ERROR_STATE,errorTitle:"No game object available"})},r.statusMessage=function(){var e=r.state,t=e.runStage,n=e.errorDesc,a=e.errorTitle;switch(t){case q.CONTROLLER_INIT:return Object(A.jsx)(Z,{level:3,children:"Initialising controllers..."});case q.ERROR_STATE:return Object(A.jsx)(F.a,{message:a,description:Object(A.jsx)("pre",{children:n}),type:"error",showIcon:!0});case q.GAME_RUN:return Object(A.jsx)(Z,{level:3,children:"Running..."});case q.GAME_OVER:return Object(A.jsx)(Z,{level:3,children:"Game complete!"});default:return Object(A.jsx)(F.a,{message:"Game unset!? Contact dev",type:"warning",showIcon:!0})}},r.state={runStage:q.UNSET,tickProgress:0},r}return Object(D.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.runStage!==this.state.runStage&&this.stateUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.controllers,n=e.options;if(t&&t.length&&n){var r=new X(t,n,this.onTickUpdate);this.setState({game:r,runStage:q.CONTROLLER_INIT})}else this.setState({runStage:q.ERROR_STATE,errorTitle:"Missing controllers or options?",errorDesc:JSON.stringify(t,null,2)+"\n"+JSON.stringify(n,null,2)})}},{key:"render",value:function(){var e=this.statusMessage(),t=this.state,n=t.tickProgress,r=t.runStage,a="normal";return r===q.GAME_RUN?a="active":r===q.GAME_OVER?a="success":r===q.ERROR_STATE&&(a="exception"),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(f.b,{direction:"vertical",style:{width:"100%",justifyContent:"center",alignItems:"center"},children:[e,Object(A.jsx)(J.a,{type:"circle",percent:n,status:a}),Object(A.jsx)("br",{}),Object(A.jsx)(p.a,{size:"large",onClick:this.onCancel,danger:!0,children:"Cancel"})]})})}}]),n}(i.a.Component),te=n(323),ne=function(e){var t=e.onConfigChange,n=e.onNext,r=e.onPrev,a=i.a.useState(50),s=Object(O.a)(a,2),o=s[0],l=s[1],u=i.a.useState(1e3),j=Object(O.a)(u,2),b=j[0],d=j[1],h=Object(c.useCallback)((function(){t({gridSize:o,maxTicks:b})}),[t,o,b]),x=Object(c.useCallback)((function(e){d(e),h()}),[h,d]),g=Object(c.useCallback)((function(e){l(e),h()}),[h,l]);return Object(c.useEffect)((function(){t({gridSize:o,maxTicks:b})}),[t,o,b]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(m.a,{children:[Object(A.jsx)(m.a.Item,{label:"Max ticks",children:Object(A.jsx)(te.a,{min:1,max:1e4,defaultValue:1e3,value:b,onChange:x})}),Object(A.jsx)(m.a.Item,{label:"Grid size",children:Object(A.jsx)(te.a,{min:10,max:1e3,defaultValue:50,value:o,onChange:g})})]}),Object(A.jsxs)(f.b,{children:[Object(A.jsx)(p.a,{onClick:r,children:"Previous"}),Object(A.jsx)(p.a,{type:"primary",onClick:n,children:"Start"})]})]})},re=n(324),ae=n(326),ce=n(334),ie=n(335),se=n(336),oe=n(195),le=n(337),ue=n(103),je=n.n(ue);!function(e){e.HISTORIES="histories"}($||($={}));var Oe,be=function(){var e=je.a.get($.HISTORIES)||{};return Object.values(e).sort((function(e,t){return new Date(e.timeStamp).valueOf()-new Date(t.timeStamp).valueOf()}))},de=function(e){var t=new Blob([JSON.stringify(e,null,2)],{type:"text/json"});return{href:URL.createObjectURL(t),download:"".concat(e.timeStamp,".json")}},he=re.a.Panel,fe=d.a.Paragraph,pe=function(e){var t=e.gameHistory,n=e.onNext;if(Object(c.useEffect)((function(){t&&function(e){var t=je.a.get($.HISTORIES)||{};je.a.set($.HISTORIES,Object(W.a)(Object(W.a)({},t),{},Object(Y.a)({},e.gameId,e)))}(t)})),!t)return Object(A.jsx)("div",{children:"Error: No game history specified"});var a=de(t),i=Object(A.jsx)(ae.a,{icon:Object(A.jsx)(ce.a,{}),status:"success",title:"Player "+t.winner+" wins!"});return t.result===r.DRAW?i=Object(A.jsx)(ae.a,{icon:Object(A.jsx)(ie.a,{}),status:"warning",title:"Draw!"}):t.result===r.TIMEOUT&&(i=Object(A.jsx)(ae.a,{icon:Object(A.jsx)(se.a,{}),status:"warning",title:"Timeout"})),Object(A.jsxs)(A.Fragment,{children:[i,Object(A.jsxs)(f.b,{children:[Object(A.jsx)(p.a,{onClick:n,type:"primary",children:"New Game"}),Object(A.jsx)(l.b,{to:"/viewer?gameId=".concat(null===t||void 0===t?void 0:t.gameId),children:Object(A.jsx)(p.a,{icon:Object(A.jsx)(oe.a,{}),children:"Show in viewer"})}),Object(A.jsx)(p.a,Object(W.a)(Object(W.a)({icon:Object(A.jsx)(le.a,{})},a),{},{children:"Download Replay"}))]}),Object(A.jsx)(x.a,{}),Object(A.jsx)(re.a,{children:Object(A.jsx)(he,{header:"Full Game History",children:Object(A.jsx)(fe,{children:Object(A.jsx)("pre",{children:JSON.stringify(t,null,2)})})},"1")})]})},me=b.a.Step,xe=d.a.Title;!function(e){e[e.CONTROLLER_CREATOR=0]="CONTROLLER_CREATOR",e[e.GAME_SETUP=1]="GAME_SETUP",e[e.PLAYING=2]="PLAYING",e[e.SUMMARY=3]="SUMMARY"}(Oe||(Oe={}));var ge=function(){var e=Object(c.useState)(Oe.CONTROLLER_CREATOR),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(O.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(),u=Object(O.a)(l,2),j=u[0],d=u[1],h=Object(c.useState)(),f=Object(O.a)(h,2),p=f[0],m=f[1],x=Object(c.useCallback)((function(e){o(e)}),[o]),g=Object(c.useCallback)((function(e){d(e)}),[d]),v=Object(c.useCallback)((function(e){m(e)}),[m]),S=Object(c.useCallback)((function(){r((n+1)%(Oe.SUMMARY+1))}),[n,r]),y=Object(c.useCallback)((function(){r((n-1)%(Oe.SUMMARY+1))}),[n,r]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(xe,{children:"Play a Game"}),Object(A.jsxs)(b.a,{current:n,children:[Object(A.jsx)(me,{title:"Controller Creator"}),Object(A.jsx)(me,{title:"Game Setup"}),Object(A.jsx)(me,{title:"Running"}),Object(A.jsx)(me,{title:"Summary"})]}),Object(A.jsx)("br",{}),n===Oe.CONTROLLER_CREATOR&&Object(A.jsx)(L,{onControllerChange:x,onNext:S}),n===Oe.GAME_SETUP&&Object(A.jsx)(ne,{onConfigChange:g,onNext:S,onPrev:y}),n===Oe.PLAYING&&Object(A.jsx)(ee,{controllers:s,options:j,onPrev:y,onNext:S,gameComplete:v}),n===Oe.SUMMARY&&Object(A.jsx)(pe,{gameHistory:p,onNext:S})]})},ve=d.a.Title,Se=d.a.Paragraph,ye=function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(ve,{children:"Snake Tron - Code Fights!"}),Object(A.jsx)(Se,{children:"What, you thought there would be content?"})]})},Re=u.a.Content,ke=function(e){return Object(A.jsx)(Re,{className:"content",children:e.children})},Te=u.a.Footer,Ce=function(){return Object(A.jsxs)(Te,{className:"footer",children:["Created by ",Object(A.jsx)("a",{href:"http://samuel-lewis.com/",children:"Samuel Lewis"})]})},Ee=n(85),Ie=u.a.Header,Ne=function(){return Object(A.jsxs)(Ie,{className:"header",children:[Object(A.jsx)("div",{className:"logo"}),Object(A.jsxs)(Ee.a,{theme:"dark",mode:"horizontal",children:[Object(A.jsx)(Ee.a.Item,{children:Object(A.jsx)(l.b,{to:"/",children:"Home"})},"home"),Object(A.jsx)(Ee.a.Item,{children:Object(A.jsx)(l.b,{to:"/game",children:"Game"})},"game"),Object(A.jsx)(Ee.a.Item,{children:Object(A.jsx)(l.b,{to:"/viewer",children:"Viewer"})},"viewer"),Object(A.jsx)(Ee.a.Item,{children:Object(A.jsx)(l.b,{to:"/tester",children:"Controller Tester"})},"tester")]})]})},we=n(321),Ae=n(316),Me=n(317),Pe=we.a.TabPane,Ue=d.a.Title,Ge=d.a.Paragraph,_e={playerNumber:2,playerCount:4,gameId:"sample-test",gridSize:50},Le={tick:2,positions:[[[42,31],[41,31],[40,31]],[[47,27],[47,28]]],lastMoves:[a.NORTH,a.SOUTH],food:[[35,16],[17,6]],playerAlive:[!0,!0],meta:{playerCount:2,gameId:"48e2ee9e-171e-45bd-8904-a762d8e2b782",gridSize:50}},De=function(){var e=Object(c.useState)(null),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(O.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(""),u=Object(O.a)(l,2),j=u[0],b=u[1],d=Object(c.useCallback)((function(e){console.log(e),r(U.create(e))}),[r]),h=Object(c.useCallback)((function(){b(JSON.stringify(_e,null,2)),null===n||void 0===n||n.init(_e).then((function(e){return o(JSON.stringify(e,null,2))})).catch((function(e){return o(e.message)}))}),[n,o]),f=Object(c.useCallback)((function(){b(JSON.stringify(Le,null,2)),null===n||void 0===n||n.update(Le).then((function(e){return o(JSON.stringify(e,null,2))})).catch((function(e){return o(e.message)}))}),[n,o]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Ue,{children:"Controller Tester"}),Object(A.jsx)(we.a,{defaultActiveKey:"1",children:Object(A.jsx)(Pe,{tab:U.label,children:Object(A.jsx)(U.Selector,{onChange:d})},"1")}),Object(A.jsx)(p.a,{onClick:h,children:"Test game initialise"}),Object(A.jsx)(p.a,{onClick:f,children:"Test game update"}),Object(A.jsxs)(Ae.a,{gutter:16,children:[Object(A.jsxs)(Me.a,{span:12,children:[Object(A.jsx)(x.a,{children:"Sent"}),Object(A.jsx)(Ge,{children:j&&Object(A.jsx)("pre",{children:j})})]}),Object(A.jsxs)(Me.a,{span:12,children:[Object(A.jsx)(x.a,{children:"Response"}),Object(A.jsx)(Ge,{children:s&&Object(A.jsx)("pre",{children:s})})]})]})]})},ze=n(194),He=n(193),Fe=n(331),Je=n(318),We=n(322),Ve=400;function Ye(e,t,n,r){var a=Object(O.a)(n,2),c=a[0],i=a[1];e.fillStyle=r,e.fillRect(c*t,i*t,t,t)}var qe=function(e){var t=Object(c.useRef)(null),n=e.state,r=e.gridSize;return Object(c.useLayoutEffect)((function(){var e=t.current;if(e){var a=e.getContext("2d");if(a){var c=Ve/r;!function(e){e.clearRect(0,0,Ve,Ve),e.strokeRect(0,0,Ve,Ve)}(a),n.positions.forEach((function(e,t){!function(e,t,n,r){n.forEach((function(n){return Ye(e,t,n,"red")}))}(a,c,e)})),n.food.forEach((function(e){return Ye(a,c,e,"green")}))}}}),[t,n,r]),Object(A.jsx)("canvas",{width:Ve,height:Ve,ref:t})},Be=n(144),Ke=n(146),Qe=d.a.Paragraph,Xe=function(e){var t=e.frame;if(!t)return null;var n=new Array(t.playerAlive.length).fill(null).map((function(e,n){return{key:"Player ".concat(n),name:"Player ".concat(n),alive:t.playerAlive[n],lastMove:t.lastMoves[n],position:t.positions[n]}})),r=[{title:"Name",dataIndex:"name",key:"name"},{title:"Alive",dataIndex:"alive",key:"alive",render:function(e){return e?Object(A.jsx)(Be.a,{}):Object(A.jsx)(Ke.a,{})}},{title:"Last Move",dataIndex:"lastMove",key:"lastMove"},{title:"Positions",dataIndex:"position",key:"position",render:function(e){return JSON.stringify(e)},ellipsis:!0}];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(Qe,{children:["Tick: ",t.tick]}),Object(A.jsxs)(Qe,{children:["Food: ",JSON.stringify(t.food)]}),Object(A.jsx)(Je.a,{size:"small",dataSource:n,columns:r,pagination:!1,expandable:{expandedRowRender:function(e){return Object(A.jsx)("p",{style:{margin:0},children:JSON.stringify(e.position)})}}})]})},Ze=function(e){var t=e.history,n=Object(c.useState)(0),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useCallback)((function(e){return i(e)}),[i]);return t?Object(A.jsxs)(Ae.a,{justify:"center",children:[Object(A.jsxs)(Me.a,{span:12,children:[Object(A.jsx)(qe,{state:t.ticks[a],gridSize:t.gridSize}),Object(A.jsx)(We.a,{style:{width:"400px",marginLeft:0,marginRight:0},value:a,min:0,max:t.tickCount-1,onChange:s})]}),Object(A.jsx)(Me.a,{span:12,children:Object(A.jsx)(Xe,{frame:t.ticks[a]})})]}):Object(A.jsx)("div",{children:"Error: No history loaded?!"})},$e=["key","humanDate"],et=d.a.Title,tt=function(){var e=Object(c.useState)(be().reverse()),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(),s=Object(O.a)(i,2),o=s[0],u=s[1],b=new URLSearchParams(Object(j.f)().search);Object(c.useEffect)((function(){var e=b.get("gameId");if(e)if("latest"!==e){var t=n.find((function(t){return t.gameId===e}));t?u(t):He.b.error("Could not find game ".concat(e))}else u(n[0])}),[n,u,b]);var d=Object(c.useMemo)((function(){return n.map((function(e){return Object(W.a)(Object(W.a)({},e),{},{key:e.gameId})}))}),[n]),h=[{title:"Timestamp",dataIndex:"timeStamp",key:"timeStamp",ellipsis:!0,defaultSortOrder:"descend",sorter:{compare:function(e,t){return new Date(e.timeStamp).valueOf()-new Date(t.timeStamp).valueOf()},multiple:1},render:function(e){return Object(A.jsx)("span",{children:new Date(e).toString()})}},{title:"Result",dataIndex:"result",key:"result",sorter:{compare:function(e,t){return e.result.localeCompare(t.result)},multiple:2},render:function(e){var t=e===r.WINNER?"green":e===r.DRAW?"blue":"red";return Object(A.jsx)(Fe.a,{color:t,children:e})}},{title:"Winner",dataIndex:"winner",key:"winner",sorter:{compare:function(e,t){return e.winner-t.winner},multiple:3}},{title:"Player Count",dataIndex:"playerCount",key:"playerCount",sorter:{compare:function(e,t){return e.playerCount-t.playerCount},multiple:4}},{title:"Tick Count",dataIndex:"tickCount",key:"tickCount",sorter:{compare:function(e,t){return e.tickCount-t.tickCount},multiple:5}},{title:"Grid Size",dataIndex:"gridSize",key:"gridSize",sorter:{compare:function(e,t){return e.gridSize-t.gridSize},multiple:6}},{title:"ID",dataIndex:"gameId",key:"gameId",ellipsis:!0,sorter:{compare:function(e,t){return e.gameId.localeCompare(t.gameId)},multiple:7}},{title:"Actions",key:"actions",render:function(e,t){t.key,t.humanDate;var n=Object(ze.a)(t,$e),r=de(n);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(g.a,{title:"View",children:Object(A.jsx)(l.b,{to:"/viewer?gameId=".concat(n.gameId),children:Object(A.jsx)(p.a,{icon:Object(A.jsx)(oe.a,{})})})}),Object(A.jsx)(g.a,{title:"Download",children:Object(A.jsx)(p.a,Object(W.a)({icon:Object(A.jsx)(le.a,{})},r))}),Object(A.jsx)(g.a,{title:"Delete",children:Object(A.jsx)(p.a,{onClick:function(){!function(e){var t=je.a.get($.HISTORIES)||{};t[e]=void 0,je.a.set($.HISTORIES,t),be()}(t.gameId),a(be())},icon:Object(A.jsx)(S.a,{})})})]})}}];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(et,{children:"Game Viewer"}),o&&Object(A.jsx)(Ze,{history:o}),Object(A.jsx)(x.a,{children:"Saved Rounds"}),Object(A.jsx)(Je.a,{dataSource:d,columns:h,pagination:{pageSize:10,position:["topRight","bottomRight"],showTotal:function(e){return"".concat(e," games")}}})]})};var nt=function(){return Object(A.jsx)("div",{className:"App",children:Object(A.jsxs)(u.a,{className:"layout",children:[Object(A.jsx)(Ne,{}),Object(A.jsx)(ke,{children:Object(A.jsxs)(j.c,{children:[Object(A.jsx)(j.a,{exact:!0,path:"/",children:Object(A.jsx)(ye,{})}),Object(A.jsx)(j.a,{path:"/game",children:Object(A.jsx)(ge,{})}),Object(A.jsx)(j.a,{path:"/viewer",children:Object(A.jsx)(tt,{})}),Object(A.jsx)(j.a,{path:"/tester",children:Object(A.jsx)(De,{})})]})}),Object(A.jsx)(Ce,{})]})})};o.a.render(Object(A.jsx)(i.a.StrictMode,{children:Object(A.jsx)(l.a,{children:Object(A.jsx)(nt,{})})}),document.getElementById("root"))}},[[311,1,2]]]);
//# sourceMappingURL=main.47378e51.chunk.js.map