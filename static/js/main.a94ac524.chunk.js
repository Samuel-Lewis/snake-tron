(this["webpackJsonpsnake-tron"]=this["webpackJsonpsnake-tron"]||[]).push([[0],{143:function(e,t,n){},145:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),c=n(26),o=n.n(c),s=(n(143),n(144),n(145),n(230)),l=n(24),u=n(57),j=n(233),b=n(235),h=n(231),d=n(234),O=n(237),m=n(7),f=b.a.Option,p=function(e){var t=Object(i.useState)(2),n=Object(u.a)(t,2),r=n[0],a=n[1],c=Object(i.useCallback)((function(t){e.onSubmit&&e.onSubmit(Object.values(t))}),[]),o=Object(i.useCallback)((function(e){a(e)}),[a]),s=new Array(r).fill(0).map((function(e,t){return Object(m.jsx)(h.a.Item,{name:"Player ".concat(t),label:"Player ".concat(t),rules:[{required:!0}],children:Object(m.jsx)(b.a,{placeholder:"Select a controller...",allowClear:!0,children:Object(m.jsx)(f,{value:"random",children:"Random"})})},"formItem"+t)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.a,{min:2,defaultValue:2,onChange:o}),Object(m.jsxs)(h.a,{name:"basic",initialValues:{remember:!0},onFinish:c,children:[s,Object(m.jsx)(h.a.Item,{children:Object(m.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})},x=n(229),v=n(136),S=n(66),g=n(104),y=n(130),k=n(239),I=n(105),N=n(67);!function(e){e.NORTH="N",e.SOUTH="S",e.EAST="E",e.WEST="W"}(r||(r={}));var E,w=function(e){return[Math.floor(Math.random()*e),Math.floor(Math.random()*e)]},C={gridSize:50,maxTicks:1e3},T=function(){function e(t,n){Object(g.a)(this,e),this.controllers=void 0,this.options=void 0,this.gameState=void 0,this.controllers=t,this.options=Object(S.a)(Object(S.a)({},C),n),this.gameState=this.initState(t,this.options),this.initControllers(this.gameState)}return Object(y.a)(e,[{key:"run",value:function(){for(var e=[];this.gameState.playerAlive.filter((function(e){return e})).length>1&&this.gameState.tick<this.options.maxTicks;){var t=Object(I.cloneDeep)(this.update());e.push(t)}return function(e){if(0===e.length)return{error:!0,errorMessage:"No moves made"};var t=e[0].meta,n=e[e.length-1].playerAlive.findIndex((function(e){return e})),r=e.map((function(e){return Object(I.omit)(e,["meta"])}));return Object(S.a)(Object(S.a)({},t),{},{tickCount:r.length,ticks:r,winner:n,error:!1})}(e)}},{key:"initControllers",value:function(e){}},{key:"initState",value:function(e,t){var n=e.length,r={tick:0,positions:[],lastMoves:[],food:[],playerAlive:new Array(n).fill(!0),meta:{playerCount:n,gameId:Object(k.a)(),gridSize:t.gridSize}};return r.positions=this.uniquePos(r,n).map((function(e){return[e]})),r.food=this.uniquePos(r,n),r}},{key:"uniquePos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=0;r<t;r++){var i=w(e.meta.gridSize);n.push(i)}return n}},{key:"update",value:function(){var e=this,t=this.controllers.map((function(t){return t.update(e.gameState)})),n=this.apply(this.gameState,t);return this.gameState=n,this.gameState}},{key:"apply",value:function(e,t){var n,i=Object(S.a)({},e);return i.tick=e.tick+1,t.forEach((function(t,n){var a,c,o=e.positions[n][0],s=function(e){var t;return(t={},Object(N.a)(t,r.NORTH,[0,-1]),Object(N.a)(t,r.SOUTH,[0,1]),Object(N.a)(t,r.EAST,[1,0]),Object(N.a)(t,r.WEST,[-1,0]),t)[e]}(t),l=[o[0]+s[0],o[1]+s[1]];(i.lastMoves[n]=t,a=l,c=i.meta.gridSize,a.every((function(e){return e>=0&&e<c})))?e.positions.some((function(e){return e.some((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return n===l[0]&&r===l[1]}))}))?i.playerAlive[n]=!1:(e.food.some((function(e){return e[0]===l[0]&&e[1]===l[1]&&(i.food=i.food.filter((function(t){return t!==e})),!0)}))||i.positions[n].pop(),i.positions[n].unshift(l)):i.playerAlive[n]=!1})),(n=i.food).push.apply(n,Object(v.a)(this.uniquePos(i,i.meta.playerCount-i.food.length))),i}}]),e}(),A=function e(){Object(g.a)(this,e),this.init=function(){},this.update=function(e){return r.NORTH}},H=function(e){var t=e.controllerNames,n=e.onComplete;return Object(i.useEffect)((function(){var e=t.map((function(e){if("random"===e)return new A})),r=new T(e);n(r.run())}),[t,n]),Object(m.jsx)("div",{children:Object(m.jsx)(x.a,{size:"large"})})},G=n(232),P=n(236),L=G.a.Paragraph,M=P.a.Panel,D=function(e){var t=e.gameHistory;return Object(m.jsxs)("div",{children:[Object(m.jsx)(O.a,{type:"primary",onClick:function(){return function(e){var t=(new Date).toISOString(),n="".concat(t,"_summary.json"),r=document.createElement("a"),i=new Blob([JSON.stringify(e)],{type:"text/plain"});r.href=URL.createObjectURL(i),r.download=n,r.click()}(t)},children:"Download"}),Object(m.jsx)(P.a,{children:Object(m.jsx)(M,{header:"Full Game History",children:Object(m.jsx)(L,{children:Object(m.jsx)("pre",{children:JSON.stringify(t,null,2)})})},"1")})]})},F=j.a.Step;!function(e){e[e.SELECTING=0]="SELECTING",e[e.PLAYING=1]="PLAYING",e[e.FINISHED=2]="FINISHED"}(E||(E={}));var z=function(){var e=Object(i.useState)(E.SELECTING),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)([]),c=Object(u.a)(a,2),o=c[0],s=c[1],l=Object(i.useState)({error:!0,errorMessage:"Game not ini"}),b=Object(u.a)(l,2),h=b[0],d=b[1],O=Object(i.useCallback)((function(e){s(e),r(E.PLAYING)}),[s]),f=Object(i.useCallback)((function(e){d(e),r(E.FINISHED)}),[d]),x=null;switch(n){case E.SELECTING:x=Object(m.jsx)(p,{onSubmit:O});break;case E.PLAYING:x=Object(m.jsx)(H,{controllerNames:o,onComplete:f});break;case E.FINISHED:x=Object(m.jsx)(D,{gameHistory:h})}return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Run a game"}),Object(m.jsxs)(j.a,{current:n,children:[Object(m.jsx)(F,{title:"Game Setup"}),Object(m.jsx)(F,{title:"Simulating"}),Object(m.jsx)(F,{title:"Summary"})]}),x]})},R=function(e){return Object(m.jsx)("div",{children:"What, you wanted content? Nah"})},q=s.a.Footer,J=function(){return Object(m.jsxs)(q,{style:{textAlign:"center"},children:["Created by ",Object(m.jsx)("a",{href:"http://samuel-lewis.com/",children:"Samuel Lewis"})]})},U=n(61),W=n(238),Y=G.a.Title,V=s.a.Header,B=function(){return Object(m.jsxs)(V,{children:[Object(m.jsx)("div",{className:"logo",style:{float:"left"},children:Object(m.jsx)(Y,{children:"\ud83d\udc0d\ud83c\udfcd\ufe0f"})}),Object(m.jsxs)(W.a,{theme:"dark",mode:"horizontal",children:[Object(m.jsx)(W.a.Item,{children:Object(m.jsx)(U.b,{to:"/",children:"Home"})},"home"),Object(m.jsx)(W.a.Item,{children:Object(m.jsx)(U.b,{to:"/game",children:"Game"})},"game"),Object(m.jsx)(W.a.Item,{children:Object(m.jsx)(U.b,{to:"/viewer",children:"Viewer"})},"viewer")]})]})},_=s.a.Content,K=function(e){return Object(m.jsx)(_,{style:{padding:"50px",height:"100%"},children:e.children})},Q=function(){return Object(m.jsx)("div",{children:"Not implemented :D"})};var X=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(s.a,{children:[Object(m.jsx)(B,{}),Object(m.jsx)(K,{children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",children:Object(m.jsx)(R,{})}),Object(m.jsx)(l.a,{path:"/game",children:Object(m.jsx)(z,{})}),Object(m.jsx)(l.a,{path:"/viewer",children:Object(m.jsx)(Q,{})})]})}),Object(m.jsx)(J,{})]})})};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(U.a,{basename:"/snake-tron",children:Object(m.jsx)(X,{})})}),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.a94ac524.chunk.js.map